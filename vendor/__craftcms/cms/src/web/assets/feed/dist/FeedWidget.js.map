{"version":3,"file":"FeedWidget.js","mappings":"YAAA,IAAUA,EAAAA,EAoDPC,OAjDCC,MAAMC,WAAaC,QAAQC,KAAKC,OAAO,CACnCC,QAAS,KAETC,KAAM,SAASC,EAAUC,EAAKC,GAAO,WACjCC,KAAKL,QAAUP,EAAE,UAAYS,GAC7BG,KAAKL,QAAQM,SAAS,WAGtBC,MAAMC,IAAI,mCAAoC,CAC1CC,OAAQ,CACJN,IAAKA,KAEVO,MAAK,SAAAC,GACJ,EAAKX,QAAQY,YAAY,WACzB,EAAKZ,QAAQa,KAAK,SACbC,KAAK,MAAOH,EAASI,KAAKC,WAI/B,IAHA,IAAIC,EAAO,EAAKjB,QAAQa,KAAK,MACzBK,EAAQP,EAASI,KAAKG,OAAS,GAE1BC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACnC,IAAIE,EAAOH,EAAMC,GACbG,EAAM7B,EAAEwB,EAAKE,IAEbI,EAAa9B,EAAE,OAAQ,CACvB+B,KAAMH,EAAKI,UACXC,OAAQ,SACRC,KAAMN,EAAKO,QACZpB,IAAI,GAAGqB,UAAY,IAElBR,EAAKS,OACLP,GAAc,8BAAgC5B,MAAMoC,WAAWV,EAAKS,MAAQ,WAGhFR,EAAIU,KAAKT,GAIb5B,MAAMsC,kBAAkB,OAAQ,4BAA6B,CACzDlB,KAAM,CACFZ,IAAKA,EACLY,KAAMJ,EAASI,WAhC3B,OAmCS,WACL,EAAKf,QAAQY,YAAY,WACzBjB,MAAMuC,GAAGC,aAAaxC,MAAMyC,EAAE,MAAO,kC","sources":["webpack:///./FeedWidget.js"],"sourcesContent":["(function($) {\n    /** global: Craft */\n    /** global: Garnish */\n    Craft.FeedWidget = Garnish.Base.extend({\n        $widget: null,\n\n        init: function(widgetId, url, limit) {\n            this.$widget = $('#widget' + widgetId);\n            this.$widget.addClass('loading');\n\n            // Get the feed data\n            axios.get('https://feed-proxy.craftcms.com/', {\n                params: {\n                    url: url,\n                },\n            }).then(response => {\n                this.$widget.removeClass('loading');\n                this.$widget.find('table')\n                    .attr('dir', response.data.direction);\n                let $tds = this.$widget.find('td');\n                let items = response.data.items || [];\n\n                for (let i = 0; i < items.length; i++) {\n                    let item = items[i];\n                    let $td = $($tds[i]);\n\n                    var widgetHtml = $('<a/>', {\n                        href: item.permalink,\n                        target: '_blank',\n                        text: item.title\n                    }).get(0).outerHTML + ' ';\n\n                    if (item.date) {\n                        widgetHtml += '<span class=\"light nowrap\">' + Craft.formatDate(item.date) + '</span>';\n                    }\n\n                    $td.html(widgetHtml);\n                }\n\n                // Now cache the data\n                Craft.sendActionRequest('POST', 'dashboard/cache-feed-data', {\n                    data: {\n                        url: url,\n                        data: response.data,\n                    },\n                });\n            }).catch(() => {\n                this.$widget.removeClass('loading');\n                Craft.cp.displayError(Craft.t('app', 'Could not load the feed'));\n            });\n        }\n    });\n})(jQuery);\n"],"names":["$","jQuery","Craft","FeedWidget","Garnish","Base","extend","$widget","init","widgetId","url","limit","this","addClass","axios","get","params","then","response","removeClass","find","attr","data","direction","$tds","items","i","length","item","$td","widgetHtml","href","permalink","target","text","title","outerHTML","date","formatDate","html","sendActionRequest","cp","displayError","t"],"sourceRoot":""}